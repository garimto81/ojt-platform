# PRD-0001: AI 기반 온보딩 학습 플랫폼

**프로젝트명**: GG Production Knowledge Platform
**작성일**: 2025-01-13
**버전**: 2.0.0
**상태**: 핵심 기능 재정의

---

## 📋 문제 정의

### 현재 상황
GG Production의 포커 프로덕션 신규 입사자 온보딩 과정에서:
- 기존 온보딩 기간: **21일**
- 현장 투입률: 70% (30%는 재교육 필요)
- 트레이너 1명당 교육 인원: 최대 3명
- 콘텐츠 관리 문제: **체계화되지 않은 교육 자료**
- 평가 문제 부족: 수동으로 문제 제작 (트레이너 부담 ↑)

### 핵심 과제 (Core Challenges)

#### 🎯 **과제 1: AI 콘텐츠 정리 시스템**
**문제**: 트레이너들이 교육 자료를 작성할 때 체계적이지 않거나 정리되지 않은 형태로 입력
- 형식이 일관되지 않음 (문서마다 다른 구조)
- 핵심 내용과 부수적 내용이 섞여있음
- 중복된 설명이나 불필요한 내용 포함
- 학습 목표가 불명확

**해결**: **개떡같이 입력해도 찰떡같이 정리**
- AI가 입력된 콘텐츠를 분석하여 자동 구조화
- 학습 목표 자동 추출
- 핵심 개념 하이라이트
- 일관된 포맷으로 변환
- 난이도 자동 분류

**기대 효과**:
- 트레이너 콘텐츠 작성 시간 70% 단축
- 학습 콘텐츠 품질 일관성 확보
- 신규 트레이너도 쉽게 콘텐츠 작성 가능

#### 🎯 **과제 2: AI 랜덤 퀴즈 생성 시스템**
**문제**: 퀴즈 문제 제작에 많은 시간과 노력 필요
- 트레이너가 수동으로 문제 작성 (레슨당 1-2시간)
- 문제 풀이 다양성 부족 (고정된 문제)
- 난이도 조절 어려움
- 문제 은행 부족

**해결**: **정리된 콘텐츠 기반 지능형 퀴즈 자동 생성**
- AI가 정리된 레슨 콘텐츠를 분석
- 핵심 개념 기반 문제 자동 생성
- 다양한 문제 유형 지원 (객관식, O/X, 단답형)
- 난이도별 문제 생성 (쉬움/보통/어려움)
- 매번 다른 문제 조합 (랜덤 출제)
- 상세한 해설 자동 생성

**기대 효과**:
- 퀴즈 제작 시간 90% 단축
- 무한한 문제 변형 가능
- 학습자별 맞춤형 난이도 제공
- 반복 학습 시 지루함 해소

---

## 🎯 프로젝트 목표

### 정량적 목표
- ✅ 온보딩 기간: **21일 → 7일** (66% 단축)
- ✅ 현장 투입률: **70% → 95%** (36% 향상)
- ✅ 트레이너 생산성: **3명 → 10명** 동시 교육 가능
- ✅ 콘텐츠 작성 시간: **70% 단축** (AI 자동 정리)
- ✅ 퀴즈 제작 시간: **90% 단축** (AI 자동 생성)
- ✅ 문제 다양성: **무한 변형** (랜덤 생성)

### 정성적 목표
- 📚 체계적이고 일관된 학습 경험 제공
- 🤖 AI로 트레이너 업무 부담 최소화
- 🎮 게임화를 통한 학습 동기 부여
- 📊 실시간 진행률 추적 및 분석

---

## 🏗️ 시스템 아키텍처

### AI 기능 구성도

```
┌─────────────────────────────────────────────────────────────┐
│                    트레이너 입력 레이어                      │
│  "개떡같이" 입력된 콘텐츠 (비정형, 중복, 불명확)             │
└─────────────────────┬───────────────────────────────────────┘
                      ↓
┌─────────────────────────────────────────────────────────────┐
│              🤖 AI 콘텐츠 정리 엔진 (Gemini)                 │
│                                                               │
│  1. 구조 분석 & 재구성                                        │
│     - 제목, 부제목 자동 추출                                  │
│     - 학습 목표 식별                                          │
│     - 핵심 개념 하이라이트                                    │
│                                                               │
│  2. 품질 향상                                                 │
│     - 중복 내용 제거                                          │
│     - 일관된 톤 앤 매너 적용                                  │
│     - 포맷 표준화 (마크다운)                                  │
│                                                               │
│  3. 메타데이터 생성                                           │
│     - 난이도 자동 분류                                        │
│     - 예상 학습 시간 계산                                     │
│     - 태그 자동 생성                                          │
└─────────────────────┬───────────────────────────────────────┘
                      ↓
┌─────────────────────────────────────────────────────────────┐
│                "찰떡같이" 정리된 레슨 콘텐츠                  │
│          (구조화, 일관성, 명확한 학습 목표)                   │
└─────────────────────┬───────────────────────────────────────┘
                      ↓
┌─────────────────────────────────────────────────────────────┐
│            🤖 AI 퀴즈 생성 엔진 (Gemini)                      │
│                                                               │
│  1. 콘텐츠 분석                                               │
│     - 핵심 개념 추출 (NLP)                                    │
│     - 중요도 점수 계산                                        │
│     - 관계 분석 (개념 간 연결)                                │
│                                                               │
│  2. 문제 생성 전략                                            │
│     - 유형 선택 (객관식/O/X/단답형)                           │
│     - 난이도 설정 (쉬움/보통/어려움)                          │
│     - 오답 생성 (그럴듯한 선택지)                             │
│                                                               │
│  3. 품질 검증                                                 │
│     - 모호성 검사                                             │
│     - 정답 확률 분석                                          │
│     - 해설 자동 생성                                          │
└─────────────────────┬───────────────────────────────────────┘
                      ↓
┌─────────────────────────────────────────────────────────────┐
│              📝 랜덤 퀴즈 출제 시스템                         │
│                                                               │
│  - 매 시도마다 다른 문제 조합                                 │
│  - 학습자 수준별 난이도 조절                                  │
│  - 틀린 문제 재출제 (복습 강화)                               │
└─────────────────────────────────────────────────────────────┘
```

---

## 🔧 기술 스택

### Frontend
- **Next.js 14** (App Router, Server Components)
- **TypeScript 5.3** (타입 안정성)
- **Tailwind CSS** (WSOP 브랜드 테마)
- **TipTap Editor** (Rich Text Editor - 콘텐츠 입력)
- **React Markdown** (콘텐츠 렌더링)

### Backend
- **Supabase** (PostgreSQL, Auth, Real-time)
- **Row Level Security** (데이터 보안)
- **API Routes** (Next.js Server Actions)

### AI 통합
- **Google Gemini API** (Gemini 1.5 Pro)
  - 콘텐츠 정리 엔진
  - 퀴즈 생성 엔진
- **Structured JSON Output** (파싱 안정성)
- **프롬프트 엔지니어링** (최적화된 프롬프트)

---

## 👤 사용자 스토리

### 트레이너 (Trainer)

#### Story 1: AI 콘텐츠 정리
```
AS A 트레이너
I WANT TO 대충 작성한 교육 자료를 AI가 자동으로 정리해주길
SO THAT 콘텐츠 작성 시간을 절약하고 품질을 일관되게 유지할 수 있다

ACCEPTANCE CRITERIA:
✅ 비정형 텍스트를 입력하면 구조화된 마크다운으로 변환
✅ 학습 목표가 자동으로 추출되어 상단에 표시
✅ 핵심 개념이 하이라이트되어 강조 표시
✅ 예상 학습 시간이 자동 계산
✅ 일관된 톤 앤 매너로 문장 재구성
```

#### Story 2: AI 퀴즈 자동 생성
```
AS A 트레이너
I WANT TO 레슨 콘텐츠 기반으로 퀴즈가 자동 생성되길
SO THAT 문제 제작 시간을 절약하고 다양한 문제를 제공할 수 있다

ACCEPTANCE CRITERIA:
✅ "퀴즈 생성" 버튼 클릭으로 5-20개 문제 자동 생성
✅ 난이도별 문제 비율 조절 가능
✅ 다양한 유형 (객관식, O/X, 단답형) 생성
✅ 각 문제에 상세한 해설 포함
✅ 생성된 문제 미리보기 및 수정 가능
✅ 부적절한 문제 제거 및 재생성 가능
```

### 학습자 (Trainee)

#### Story 3: 체계적인 학습
```
AS A 학습자
I WANT TO 명확하고 체계적인 콘텐츠로 학습하길
SO THAT 혼란 없이 효율적으로 배울 수 있다

ACCEPTANCE CRITERIA:
✅ 모든 레슨이 일관된 구조 (학습 목표 → 핵심 내용 → 요약)
✅ 핵심 개념이 시각적으로 강조
✅ 예상 학습 시간 표시
✅ 이해하기 쉬운 설명
```

#### Story 4: 다양한 퀴즈 경험
```
AS A 학습자
I WANT TO 매번 다른 문제로 퀴즈를 풀길
SO THAT 암기가 아닌 진짜 이해를 테스트할 수 있다

ACCEPTANCE CRITERIA:
✅ 동일 레슨 재시도 시 다른 문제 출제
✅ 내 수준에 맞는 난이도 문제 제공
✅ 틀린 문제는 해설과 함께 복습 기회 제공
✅ 정답/오답 즉시 피드백
```

---

## 📊 데이터베이스 스키마

### 핵심 테이블

#### `lessons` (레슨)
```sql
- id: UUID
- title: TEXT (AI 생성 제목)
- content: TEXT (AI 정리된 마크다운)
- raw_content: TEXT (원본 입력 내용) -- 새로 추가
- learning_objectives: TEXT[] (AI 추출 학습 목표) -- 새로 추가
- key_concepts: TEXT[] (AI 추출 핵심 개념) -- 새로 추가
- difficulty_level: TEXT (AI 분류: easy/medium/hard) -- 새로 추가
- estimated_duration: INTEGER (AI 계산 학습 시간)
- ai_processed: BOOLEAN (AI 정리 완료 여부) -- 새로 추가
- ai_processed_at: TIMESTAMP (AI 처리 시각) -- 새로 추가
```

#### `quizzes` (퀴즈)
```sql
- id: UUID
- lesson_id: UUID
- question: TEXT (AI 생성 문제)
- question_type: TEXT (multiple_choice/true_false/short_answer)
- options: JSONB (선택지 배열)
- correct_answer: TEXT
- explanation: TEXT (AI 생성 해설)
- difficulty: TEXT (easy/medium/hard) -- 새로 추가
- concept_tags: TEXT[] (연관 개념) -- 새로 추가
- points: INTEGER
- ai_generated: BOOLEAN (AI 생성 여부) -- 새로 추가
- generation_seed: TEXT (재현성 보장) -- 새로 추가
```

#### `quiz_pools` (퀴즈 풀) -- 새 테이블
```sql
- id: UUID
- lesson_id: UUID
- total_questions: INTEGER (생성 가능한 총 문제 수)
- difficulty_distribution: JSONB (난이도별 개수)
- last_generated_at: TIMESTAMP
- generation_count: INTEGER (총 생성 횟수)
```

---

## 🎨 UI/UX 플로우

### 트레이너: AI 콘텐츠 정리 플로우

```
1. 레슨 작성 페이지 (/dashboard/admin/lessons/new)
   ↓
2. 텍스트 입력 (대충 작성해도 OK)
   - "포커 게임은 52장의 카드를 사용합니다.
      플레이어들은 각자 2장의 카드를 받고...
      뭐 그런 거 있잖아요. 아무튼 중요한 건..."
   ↓
3. "AI로 정리하기" 버튼 클릭
   ↓
4. 로딩 (3-5초)
   ↓
5. 정리된 결과 미리보기
   - 📋 학습 목표: "포커 게임의 기본 규칙 이해"
   - 📝 구조화된 콘텐츠:
     ## 포커 게임 기초
     포커는 52장의 표준 카드 덱을 사용하는 카드 게임입니다.

     ### 게임 진행 방식
     1. 각 플레이어는 2장의 홀 카드를 받습니다
     2. 5장의 커뮤니티 카드가 순차적으로 공개됩니다
     ...
   ↓
6. 수정 가능 (필요시)
   ↓
7. 저장
```

### 트레이너: AI 퀴즈 생성 플로우

```
1. 레슨 관리 페이지 (/dashboard/admin/lessons)
   ↓
2. 레슨 선택 → "퀴즈 생성" 버튼
   ↓
3. 퀴즈 생성 옵션 선택
   - 문제 개수: 5 / 10 / 15 / 20
   - 난이도: 쉬움 / 보통 / 어려움 / 혼합
   - 유형: 객관식 / O/X / 단답형 / 혼합
   ↓
4. "AI 생성 시작" 클릭
   ↓
5. 로딩 (10-30초)
   ↓
6. 생성된 문제 미리보기
   [문제 1] 포커 게임에서 사용하는 카드는 몇 장인가?
   A) 40장  B) 52장  C) 60장  D) 100장
   정답: B
   해설: 포커는 조커를 제외한 52장의 표준 카드 덱을 사용합니다.
   ↓
7. 문제별 승인/거부/재생성
   ↓
8. 최종 저장
```

### 학습자: 랜덤 퀴즈 풀이 플로우

```
1. 레슨 완료 후 "퀴즈 풀기" 버튼
   ↓
2. 시스템이 퀴즈 풀에서 랜덤 선택
   - 이전에 틀린 문제 우선
   - 난이도 자동 조절 (정답률 기반)
   ↓
3. 문제 풀이
   ↓
4. 즉시 피드백
   - ✅ 정답: "잘했어요! +10점"
   - ❌ 오답: "아쉽네요. 정답은 B입니다."
   - 📝 해설 표시
   ↓
5. 다음 문제 (총 5-10문제)
   ↓
6. 최종 결과
   - 정답률: 8/10 (80%)
   - 획득 포인트: 80점
   - 틀린 문제 복습하기
```

---

## 🚀 MVP 기능 범위

### Phase 1: AI 콘텐츠 정리 (우선순위 1)
- [ ] AI 정리 API 엔드포인트 (`/api/admin/process-content`)
- [ ] 프롬프트 최적화 (구조화, 학습 목표 추출)
- [ ] 레슨 작성 UI (원본 vs 정리본 비교)
- [ ] 처리 히스토리 (버전 관리)

### Phase 2: AI 퀴즈 생성 (우선순위 2)
- [ ] 퀴즈 생성 API 개선 (`/api/admin/generate-quiz`)
- [ ] 퀴즈 풀 관리 시스템
- [ ] 난이도별 생성 알고리즘
- [ ] 문제 검증 시스템

### Phase 3: 랜덤 출제 시스템 (우선순위 3)
- [ ] 퀴즈 선택 알고리즘 (랜덤 + 가중치)
- [ ] 적응형 난이도 조절
- [ ] 틀린 문제 재출제
- [ ] 학습자별 문제 이력 관리

### Phase 4: 분석 & 최적화 (우선순위 4)
- [ ] AI 정리 품질 평가 (트레이너 피드백)
- [ ] 퀴즈 난이도 자동 보정
- [ ] 학습 효과 분석 대시보드
- [ ] A/B 테스트 (AI vs 수동)

---

## 📈 성공 지표 (Success Metrics)

### AI 콘텐츠 정리
- **콘텐츠 작성 시간**: 평균 30분 → 9분 (70% 단축)
- **품질 점수**: 트레이너 만족도 4.5/5.0 이상
- **일관성 점수**: 90% 이상 (자동 포맷 준수율)
- **재작업률**: 20% 이하 (AI 결과 수정 빈도)

### AI 퀴즈 생성
- **퀴즈 제작 시간**: 평균 60분 → 6분 (90% 단축)
- **문제 다양성**: 레슨당 50+ 문제 보유
- **난이도 정확도**: 85% (실제 정답률 vs 예상 난이도)
- **문제 품질**: 트레이너 승인률 80% 이상

### 학습 효과
- **현장 투입률**: 70% → 95%
- **학습 완료율**: 90% 이상 (7일 내)
- **퀴즈 평균 점수**: 80점 이상
- **재시도 빈도**: 평균 1.5회 이하

---

## 🔐 보안 & 개인정보

- **AI 처리 데이터**: 학습 콘텐츠만 전송 (개인정보 제외)
- **API 키 보안**: 환경 변수 관리, 서버 사이드만 사용
- **퀴즈 정답 보호**: 클라이언트 노출 차단 (서버 검증)
- **데이터 백업**: 원본 콘텐츠 항상 보존 (AI 처리 전)

---

## 🎯 로드맵

### Q1 2025: AI 기반 콘텐츠 관리 (현재)
- ✅ AI 콘텐츠 정리 시스템 (개발 완료)
- ✅ AI 퀴즈 생성 시스템 (기본 버전)
- 🔄 랜덤 출제 알고리즘 (개발 중)

### Q2 2025: 지능형 학습 최적화
- 적응형 난이도 시스템
- 개인화된 학습 경로
- 실시간 피드백 개선

### Q3 2025: 고급 AI 기능
- 멀티모달 콘텐츠 처리 (이미지, 비디오)
- 음성 인식 퀴즈
- AI 튜터 챗봇

---

## 📎 참고 문서

- [CLAUDE.md](../CLAUDE.md) - 개발 가이드
- [PROJECT_SUMMARY.md](../PROJECT_SUMMARY.md) - 프로젝트 현황
- [DATABASE_SETUP.md](../DATABASE_SETUP.md) - DB 스키마 상세
- [AI Integration Guide](../docs/AI_INTEGRATION.md) - AI API 사용법 (예정)

---

**작성자**: Claude Code
**리뷰어**: -
**승인자**: -
**다음 단계**: Phase 1 Task 생성 (`python scripts/generate_tasks.py`)
