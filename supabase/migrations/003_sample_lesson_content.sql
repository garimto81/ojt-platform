-- Sample Lesson Content for GG Production Platform
-- This migration adds comprehensive poker training content for all 7 days

-- Update Day 1 Lessons with content
UPDATE public.lessons
SET
  content = '# 포커 기초 - 게임 규칙과 핸드 랭킹

## 학습 목표
이 레슨을 완료하면 다음을 할 수 있습니다:
- 텍사스 홀덤의 기본 규칙 이해
- 핸드 랭킹 순위 암기
- 게임의 진행 순서 파악

## 텍사스 홀덤 기본 규칙

### 게임 구조
텍사스 홀덤은 2-10명의 플레이어가 참여하는 커뮤니티 카드 포커 게임입니다.

**핵심 요소:**
- **홀 카드**: 각 플레이어에게 2장의 개인 카드 (다른 사람이 볼 수 없음)
- **커뮤니티 카드**: 테이블 중앙에 공개되는 5장의 카드 (모든 플레이어 공유)
- **최종 핸드**: 홀 카드 2장과 커뮤니티 카드 5장 중 최선의 5장 조합

### 게임 진행 순서

1. **프리플랍 (Pre-Flop)**
   - 블라인드 배팅
   - 각 플레이어에게 홀 카드 2장 지급
   - 첫 번째 베팅 라운드

2. **플랍 (Flop)**
   - 커뮤니티 카드 3장 공개
   - 두 번째 베팅 라운드

3. **턴 (Turn)**
   - 커뮤니티 카드 1장 추가 (총 4장)
   - 세 번째 베팅 라운드

4. **리버 (River)**
   - 커뮤니티 카드 1장 추가 (총 5장)
   - 마지막 베팅 라운드

5. **쇼다운 (Showdown)**
   - 남은 플레이어들이 핸드를 공개
   - 최고 핸드가 팟을 가져감

## 핸드 랭킹 (높은 순서부터)

### 1. 로얄 플러시 (Royal Flush)
- **설명**: A-K-Q-J-10 같은 무늬
- **예시**: ♠️A ♠️K ♠️Q ♠️J ♠️10
- **확률**: 0.00015% (649,740:1)

### 2. 스트레이트 플러시 (Straight Flush)
- **설명**: 연속된 5장, 같은 무늬
- **예시**: ♥️9 ♥️8 ♥️7 ♥️6 ♥️5
- **확률**: 0.0014% (72,192:1)

### 3. 포카드 (Four of a Kind)
- **설명**: 같은 숫자 4장
- **예시**: ♠️K ♥️K ♦️K ♣️K ♠️3
- **확률**: 0.024% (4,164:1)

### 4. 풀하우스 (Full House)
- **설명**: 트리플 + 페어
- **예시**: ♠️Q ♥️Q ♦️Q ♣️7 ♠️7
- **확률**: 0.14% (693:1)

### 5. 플러시 (Flush)
- **설명**: 같은 무늬 5장
- **예시**: ♣️K ♣️10 ♣️7 ♣️5 ♣️2
- **확률**: 0.20% (508:1)

### 6. 스트레이트 (Straight)
- **설명**: 연속된 5장 (무늬 무관)
- **예시**: ♠️9 ♥️8 ♦️7 ♣️6 ♠️5
- **확률**: 0.39% (254:1)

### 7. 트리플 (Three of a Kind)
- **설명**: 같은 숫자 3장
- **예시**: ♠️8 ♥️8 ♦️8 ♣️K ♠️5
- **확률**: 2.11% (46:1)

### 8. 투 페어 (Two Pair)
- **설명**: 2개의 페어
- **예시**: ♠️J ♥️J ♦️4 ♣️4 ♠️9
- **확률**: 4.75% (20:1)

### 9. 원 페어 (One Pair)
- **설명**: 같은 숫자 2장
- **예시**: ♠️10 ♥️10 ♦️K ♣️7 ♠️3
- **확률**: 42.26% (1.36:1)

### 10. 하이 카드 (High Card)
- **설명**: 위 조합이 없을 때
- **예시**: ♠️A ♥️K ♦️9 ♣️6 ♠️2
- **확률**: 50.12% (0.995:1)

## 블라인드와 베팅

### 블라인드란?
- **스몰 블라인드 (SB)**: 딜러 왼쪽 플레이어, 최소 베팅액의 절반
- **빅 블라인드 (BB)**: SB 왼쪽 플레이어, 최소 베팅액 전액

### 베팅 액션
- **폴드 (Fold)**: 게임 포기
- **체크 (Check)**: 베팅 없이 넘김 (베팅이 없을 때만)
- **콜 (Call)**: 현재 베팅액과 동일하게 베팅
- **레이즈 (Raise)**: 현재 베팅액보다 더 높게 베팅
- **올인 (All-in)**: 모든 칩 베팅

## 실전 예시

**상황**: 당신은 ♠️A ♥️K를 받았습니다.

**플랍**: ♦️A ♣️7 ♠️2

**현재 핸드**: 원 페어 (에이스)

**가능한 개선**:
- 턴/리버에서 K가 나오면 → 투 페어
- 턴/리버에서 A가 나오면 → 트리플

## 다음 단계
다음 레슨에서는 포지션의 중요성과 프리플랍 전략을 배웁니다.',
  description = '텍사스 홀덤의 기본 규칙, 핸드 랭킹, 게임 진행 순서를 학습합니다.',
  updated_at = now()
WHERE title = 'Poker Basics' AND day_id = (SELECT id FROM public.curriculum_days WHERE day_number = 1 LIMIT 1);

UPDATE public.lessons
SET
  content = '# 포지션의 중요성

## 학습 목표
- 포지션의 개념 이해
- 각 포지션의 장단점 파악
- 포지션별 전략 수립

## 포지션이란?

포지션은 딜러 버튼을 기준으로 한 당신의 위치입니다. **포지션이 늦을수록 유리합니다.**

### 포지션 분류

#### 1. 얼리 포지션 (EP)
- **UTG (Under the Gun)**: BB 다음, 첫 번째 액션
- **UTG+1, UTG+2**: UTG 다음 자리들
- **특징**: 가장 불리한 포지션
- **전략**: 타이트한 핸드 선택 (프리미엄 핸드만)

#### 2. 미들 포지션 (MP)
- **MP1, MP2, MP3**
- **특징**: 중간 포지션
- **전략**: 중간 정도의 핸드 범위

#### 3. 레이트 포지션 (LP)
- **CO (Cut-Off)**: 버튼 바로 이전
- **BTN (Button)**: 딜러 포지션
- **특징**: 가장 유리한 포지션
- **전략**: 넓은 핸드 범위 플레이 가능

#### 4. 블라인드
- **SB (Small Blind)**
- **BB (Big Blind)**
- **특징**: 플랍 이후 첫 번째 액션 (불리)

## 포지션의 장점

### 레이트 포지션의 이점

1. **정보 우위**
   - 다른 플레이어들의 액션을 먼저 봄
   - 상대의 핸드 강도 추측 가능

2. **팟 컨트롤**
   - 팟 크기 조절 가능
   - 블러핑 기회 증가

3. **폴드 에퀴티**
   - 상대를 폴드시킬 확률 증가
   - 스틸 기회 증가

## 포지션별 핸드 선택

### UTG (얼리 포지션)
**권장 핸드 범위: 약 15%**
- 프리미엄 페어: AA, KK, QQ, JJ
- 프리미엄 에이스: AK, AQ (suited)
- 극소수 다른 핸드

### CO (컷오프)
**권장 핸드 범위: 약 25%**
- UTG 범위 +
- 중간 페어: TT, 99, 88
- 수티드 커넥터: 98s, 87s, 76s
- 브로드웨이 핸드: KQ, KJ, QJ

### BTN (버튼)
**권장 핸드 범위: 약 40%**
- 가장 넓은 범위
- 거의 모든 페어
- 많은 수티드 핸드
- 연결된 핸드

## 실전 전략

### 얼리 포지션에서
```
상황: UTG에서 A♠ J♥
행동: FOLD
이유: 오프슈트 AJ는 얼리 포지션에서 너무 약함
```

### 레이트 포지션에서
```
상황: BTN에서 7♦ 6♦, 모두 폴드
행동: RAISE (스틸 시도)
이유: 포지션 + 폴드 에퀴티 + 수티드 커넥터
```

## 포지션과 베팅 사이즈

### 레이트 포지션 레이즈
- **EP 레이즈**: 3BB
- **MP 레이즈**: 2.5BB
- **LP 레이즈**: 2.5-3BB
- **BTN 스틸**: 2.5BB

### 리레이즈 (3-bet)
- **IP (in position)**: 3x 오리지널 레이즈
- **OOP (out of position)**: 4x 오리지널 레이즈

## 다음 단계
다음 레슨에서는 프리플랍 전략과 핸드 레인지를 상세히 다룹니다.',
  description = '포지션의 중요성과 각 포지션별 전략을 학습합니다.',
  updated_at = now()
WHERE title = 'Position Importance' AND day_id = (SELECT id FROM public.curriculum_days WHERE day_number = 1 LIMIT 1);

-- Day 2 Content
UPDATE public.lessons
SET
  content = '# 베팅과 팟 오즈

## 학습 목표
- 팟 오즈의 개념 이해
- 베팅 사이즈 결정 방법 학습
- 밸류 베팅과 블러핑 구분

## 팟 오즈란?

팟 오즈는 **현재 팟의 크기 대비 내가 콜해야 하는 금액의 비율**입니다.

### 계산 방법
```
팟 오즈 = 콜 금액 / (현재 팟 + 콜 금액)
```

### 예시
- 팟: $100
- 상대 베팅: $50
- 내 콜 금액: $50
- 새로운 팟: $150
- 팟 오즈: $50 / $150 = 1:3 = 33.3%

**의미**: 33.3% 이상 승률이면 콜이 이득

## 임플라이드 오즈

### 개념
- **현재 팟 오즈 + 미래에 받을 수 있는 금액**
- 드로우 핸드에 특히 중요

### 예시
```
현재 팟: $100
콜 금액: $20
팟 오즈: 20%

하지만 드로우 완성 시 상대가 추가로 $100 더 베팅할 것으로 예상
임플라이드 오즈: $20 / ($120 + $100) = 9%

→ 9%만 완성되어도 이득
```

## 베팅 사이즈

### 밸류 베팅
**목적**: 더 약한 핸드로부터 콜을 받기 위함

**사이즈**:
- **큰 베팅**: 팟의 75-100% (강한 핸드)
- **중간 베팅**: 팟의 50-66% (중간 핸드)
- **작은 베팅**: 팟의 33-50% (블러프 캐처 유도)

### 블러핑
**목적**: 더 좋은 핸드를 폴드시키기 위함

**사이즈**:
- **리버 블러프**: 팟의 66-75%
- **턴 블러프**: 팟의 50-66%
- **플랍 블러프**: 팟의 33-50%

## 아웃 계산

### 아웃이란?
- **핸드를 개선시킬 수 있는 카드**
- 확률 계산의 기초

### 예시: 플러시 드로우
```
내 핸드: A♠ K♠
플랍: 9♠ 6♠ 2♥

아웃: 13장(♠) - 4장(내 손 + 플랍) = 9 아웃
```

### 아웃 → 확률 변환
**Rule of 4 and 2**
- **플랍에서**: 아웃 x 4 = 턴+리버 확률
- **턴에서**: 아웃 x 2 = 리버 확률

```
플러시 드로우 (9 아웃)
- 플랍: 9 x 4 = 36%
- 턴: 9 x 2 = 18%
```

## 실전 예시

### 상황 1: 드로우 플레이
```
내 핸드: J♥ 10♥
보드: Q♥ 9♣ 2♥
팟: $200
상대 베팅: $100

아웃 계산:
- 플러시: 9장
- 스트레이트: 8장 (K, 8)
- 중복 제거: 약 15 아웃

확률: 15 x 4 = 60%
팟 오즈: $100 / $300 = 33.3%

판단: 60% > 33.3% → CALL
```

### 상황 2: 밸류 베팅
```
내 핸드: A♠ A♥
보드: A♦ K♣ 7♥ 3♠ 2♣
팟: $150

베팅 사이즈 결정:
- 상대가 Kx를 가질 가능성 높음
- $100 (66% 팟) 베팅
- 상대가 콜할 확률 높음
```

## 베팅 패턴 읽기

### 소액 베팅
- **의미**: 드로우 or 약한 메이드 핸드
- **대응**: 레이즈 고려

### 대액 베팅
- **의미**: 강한 핸드 or 폴라라이즈드 블러프
- **대응**: 핸드 강도에 따라 콜/폴드

### 체크-레이즈
- **의미**: 강한 핸드 or 블러프
- **대응**: 포지션과 핸드 고려

## 다음 단계
다음 레슨에서는 블러핑 기법과 핸드 리딩을 배웁니다.',
  description = '팟 오즈 계산과 베팅 사이즈 결정 방법을 학습합니다.',
  updated_at = now()
WHERE title = 'Betting & Pot Odds' AND day_id = (SELECT id FROM public.curriculum_days WHERE day_number = 2 LIMIT 1);

-- Day 3 Content
UPDATE public.lessons
SET
  content = '# 블러핑과 핸드 리딩

## 학습 목표
- 효과적인 블러핑 시기 파악
- 상대 핸드 읽는 방법 학습
- 블러핑 빈도 조절

## 블러핑의 기초

### 블러핑이란?
**약한 핸드로 상대를 폴드시키는 행위**

### 블러핑이 성공하려면
1. **크레디블한 스토리**
2. **올바른 상대 선택**
3. **적절한 보드 텍스처**
4. **충분한 폴드 에퀴티**

## 블러핑 타입

### 1. 퓨어 블러프 (Pure Bluff)
- **정의**: 쇼다운 밸류 없음
- **예시**: 7-2 오프슈트, 드로우 미스

### 2. 세미 블러프 (Semi-Bluff)
- **정의**: 드로우 핸드로 베팅
- **예시**: 플러시 드로우, 스트레이트 드로우
- **장점**: 두 가지 승리 방법
  1. 폴드 유도
  2. 드로우 완성

## 블러핑 적절한 상황

### ✅ 좋은 블러핑 상황

1. **스케어 카드 등장**
```
보드: K♥ 7♣ 2♦ A♠
→ 에이스가 떨어져 상대가 겁먹을 수 있음
```

2. **드라이 보드**
```
보드: K♣ 8♦ 2♥
→ 드로우가 적어 상대도 약할 가능성
```

3. **상대가 위크**
```
상황: 상대가 여러 번 체크
행동: 베팅 (블러프)
```

### ❌ 나쁜 블러핑 상황

1. **웻 보드**
```
보드: 9♠ 8♠ 7♣
→ 많은 드로우, 상대가 강할 가능성
```

2. **콜링 스테이션 상대**
```
특징: 절대 폴드 안 함
대응: 블러프 최소화, 밸류 베팅 위주
```

3. **멀티웨이 팟**
```
상황: 3명 이상 참여
이유: 누군가는 강한 핸드 가능성
```

## 핸드 리딩

### 레인지 기반 사고

**플레이어는 한 장의 카드가 아닌 핸드 레인지를 가짐**

#### 예시 분석
```
상황:
- 상대: UTG 레이즈
- 플랍: A♥ K♠ 5♣
- 상대: 컨티뉴에이션 베팅

상대 레인지:
- 프리미엄 페어: AA, KK, QQ, JJ, TT
- 프리미엄 에이스: AK, AQ
- 포켓: 99, 88

핸드 가능성:
- 탑 페어 이상: 70%
- 오버페어: 20%
- 에어볼: 10%
```

### 베팅 패턴 분석

#### 1. 컨티뉴에이션 베팅 (C-bet)
```
의미: 프리플랍 레이저가 플랍에서 베팅
빈도: 60-80%
레인지: 넓음 (블러프 많음)
```

#### 2. 체크-레이즈
```
의미: 강한 핸드 or 드로우
레인지: 폴라라이즈드
전략: 신중한 대응 필요
```

#### 3. 도노 베팅 (Donk Bet)
```
의미: OOP에서 먼저 베팅
의미: 주로 드로우 or 약한 메이드
전략: 공격적 대응
```

### 피지컬 텔

#### 온라인
- **베팅 타이밍**
  - 즉시 베팅: 강함 or 극약함
  - 오래 생각 후: 중간 핸드
- **베팅 사이즈 패턴**
  - 일관성 없음: 초보
  - 일관성 있음: 숙련자

#### 라이브
- **신체 언어**
  - 떨림: 강한 핸드
  - 과도한 말: 약한 핸드
  - 침착함: 경험 많음

## 블러핑 빈도

### 최적 블러핑 비율

**밸류 : 블러프 = 2:1**

```
리버 베팅 예시:
- 팟: $100
- 베팅: $100

상대가 33.3% 승률 필요
→ 블러프 25%, 밸류 75%
```

### 보드 텍스처별 빈도

- **드라이 보드**: 블러프 30-40%
- **웻 보드**: 블러프 20-30%
- **페어드 보드**: 블러프 40-50%

## 실전 블러핑

### 플랍 블러프
```
내 핸드: A♣ Q♠
보드: K♥ 9♦ 4♣
포지션: BTN
상대: BB (체크)

판단:
- 에이스 하이 (약함)
- 포지션 있음
- 상대 위크 시그널
→ C-BET (블러프)
```

### 리버 블러프
```
내 핸드: 8♠ 7♠
보드: A♥ Q♦ 5♣ 3♠ K♠
액션: 플랍 체크, 턴 체크

판단:
- 플러시 미스
- 스케어 카드 (K)
- 상대 체크 2번
→ 팟의 66% 베팅
```

## 다음 단계
다음 레슨에서는 토너먼트 전략과 ICM을 다룹니다.',
  description = '블러핑 기법과 상대의 핸드를 읽는 방법을 학습합니다.',
  updated_at = now()
WHERE title = 'Bluffing & Hand Reading' AND day_id = (SELECT id FROM public.curriculum_days WHERE day_number = 3 LIMIT 1);

-- Add content to remaining lessons
UPDATE public.lessons
SET
  content = '# 토너먼트 전략 기초\n\n## ICM 이해\n- Independent Chip Model 개념\n- 스택 크기별 전략\n- 버블 플레이\n\n## 토너먼트 단계별 전략\n1. 초기 단계\n2. 중반 단계\n3. 버블 직전\n4. ITM (In The Money)\n5. 파이널 테이블',
  description = '토너먼트 포커의 기본 전략과 ICM 개념을 학습합니다.',
  updated_at = now()
WHERE day_id = (SELECT id FROM public.curriculum_days WHERE day_number = 4 LIMIT 1) AND order_index = 1;

UPDATE public.lessons
SET
  content = '# 캐시 게임 전략\n\n## 캐시 게임 vs 토너먼트\n- 차이점 이해\n- 스택 관리\n- 테이블 선택\n\n## 최적 플레이\n1. 포지션 활용\n2. 3-bet/4-bet 전략\n3. 멀티웨이 팟\n4. 스택 깊이별 조정',
  description = '캐시 게임의 기본 전략과 최적 플레이 방법을 학습합니다.',
  updated_at = now()
WHERE day_id = (SELECT id FROM public.curriculum_days WHERE day_number = 5 LIMIT 1) AND order_index = 1;

UPDATE public.lessons
SET
  content = '# 포커 소프트웨어 활용\n\n## 필수 도구\n1. HUD (Heads-Up Display)\n2. 트래커 소프트웨어\n3. 에퀴티 계산기\n\n## 데이터 분석\n- 통계 읽는 법\n- 리크 찾기\n- 개선 포인트 도출',
  description = '포커 소프트웨어와 데이터 분석 도구 활용법을 학습합니다.',
  updated_at = now()
WHERE day_id = (SELECT id FROM public.curriculum_days WHERE day_number = 6 LIMIT 1) AND order_index = 1;

UPDATE public.lessons
SET
  content = '# 포커 프로로의 여정\n\n## 멘탈 게임\n1. 틸트 관리\n2. 뱅크롤 관리\n3. 스트레스 대처\n\n## 지속적 학습\n- 핸드 리뷰\n- 포럼 참여\n- 코칭 받기\n\n## 커리어 로드맵\n- 단계별 목표\n- 수익 관리\n- 프로의 마인드셋',
  description = '프로 포커 플레이어가 되기 위한 멘탈과 커리어 관리를 학습합니다.',
  updated_at = now()
WHERE day_id = (SELECT id FROM public.curriculum_days WHERE day_number = 7 LIMIT 1) AND order_index = 1;
